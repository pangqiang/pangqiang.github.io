---
title: '微任务执行问题'
tags: ['promise','microtask','async','await']
---

# 先看两端代码的执行结果 
## 代码1
```js
async function asy1() {
  console.log(1)
  await asy2()
  console.log(2)
}

async function asy2() {
  await 1
  console.log(3)
}

async function asy3() {
  Promise.resolve().then(() => {
    console.log(4)
  })
}

asy1()
asy3()
```
输出：
```
1
3
4
2
```

## 代码2
```js
async function asy1() {
  console.log(1)
  await asy2()
  console.log(2)
}

async function asy2() {
  await Promise.resolve().then(() => {
    console.log(3)
  })
}

async function asy3() {
  Promise.resolve().then(() => {
    console.log(4)
  })
}

asy1()
asy3()
```
输出：
```
1
3
4
2
```


## 代码3
```js
async function asy1() {
  console.log(1)
  await asy2()
  console.log(2)
}

async function asy2() {
  console.log(3)
}

async function asy3() {
  Promise.resolve().then(() => {
    console.log(4)
  })
}

asy1()
asy3()
```
输出：
```
1
3
2
4
```
